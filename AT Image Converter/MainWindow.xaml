<?xml version="1.0" encoding="utf-8" ?>
<Window
    x:Class="ImageConverterAT.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="AT Image Converter"
    mc:Ignorable="d">
    <Window.SystemBackdrop>
        <MicaBackdrop Kind="Base" />
    </Window.SystemBackdrop>
    <Frame x:Name="FrMain">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="32" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <StackPanel
                Grid.Row="0"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                Orientation="Horizontal">
                <Image
                    Width="20"
                    Height="20"
                    Margin="5,0,0,0"
                    Source="Assets/Icon.png" />
                <TextBlock
                    Margin="8,0,0,0"
                    VerticalAlignment="Center"
                    Text="AT Image Converter" />
            </StackPanel>

            <Grid
                Grid.Row="1"
                Background="{ThemeResource LayerOnMicaBaseAltFillColorSecondaryBrush}"
                BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                BorderThickness="0,1,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="2*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid
                    Grid.RowSpan="2"
                    Grid.Column="0"
                    Margin="0,10,0,0"
                    Padding="10,0,0,10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <ScrollViewer
                        x:Name="SvSettings"
                        Grid.Row="0"
                        CornerRadius="5"
                        VerticalScrollBarVisibility="Hidden">
                        <StackPanel Spacing="10">
                            <StackPanel
                                Padding="10,3.5,10,0"
                                Background="{ThemeResource LayerOnMicaBaseAltFillColorDefaultBrush}"
                                CornerRadius="5">
                                <TextBlock Style="{ThemeResource SubtitleTextBlockStyle}" Text="Images" />
                                <ListView
                                    x:Name="LvImages"
                                    Height="121.5"
                                    Margin="0,7.5,0,0"
                                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                    CornerRadius="5"
                                    DisplayMemberPath="FileName"
                                    SelectedIndex="0"
                                    SelectionChanged="OnImageListViewSelectionChanged" />
                                <CommandBar Background="Transparent" DefaultLabelPosition="Right">
                                    <AppBarButton
                                        Click="OnAddImageAppBarButtonClicked"
                                        Icon="Add"
                                        Label="Add" />
                                    <AppBarButton
                                        x:Name="AbbDelete"
                                        Click="OnDeleteImageAppBarButtonClicked"
                                        Icon="Delete"
                                        IsEnabled="False"
                                        Label="Delete" />
                                    <AppBarButton
                                        Click="OnClearImageAppBarButtonClicked"
                                        Icon="Clear"
                                        IsEnabled="{Binding ElementName=AbbDelete, Path=IsEnabled}"
                                        Label="Clear" />
                                </CommandBar>
                            </StackPanel>
                            <StackPanel
                                Padding="10,3.5,10,10"
                                Background="{ThemeResource LayerOnMicaBaseAltFillColorDefaultBrush}"
                                CornerRadius="5"
                                Spacing="5">
                                <TextBlock Style="{ThemeResource SubtitleTextBlockStyle}" Text="Format Options" />
                                <ComboBox
                                    x:Name="CbxFormat"
                                    HorizontalAlignment="Stretch"
                                    Header="Output Format"
                                    SelectedIndex="0"
                                    SelectionChanged="OnFormatComboBoxSelectionChanged">
                                    <ComboBox.Items>
                                        <x:String>JPG</x:String>
                                        <x:String>JXL</x:String>
                                        <x:String>PNG</x:String>
                                        <x:String>BMP</x:String>
                                        <x:String>WEBP</x:String>
                                        <x:String>AVIF</x:String>
                                        <x:String>HEIF</x:String>
                                        <x:String>ICO</x:String>
                                        <x:String>TIFF</x:String>
                                    </ComboBox.Items>
                                </ComboBox>
                                <NumberBox
                                    x:Name="NbQuality"
                                    HorizontalAlignment="Stretch"
                                    Header="Quality"
                                    LargeChange="10"
                                    Maximum="100"
                                    Minimum="0"
                                    SmallChange="10"
                                    SpinButtonPlacementMode="Inline"
                                    Value="80" />
                            </StackPanel>
                            <StackPanel
                                x:Name="SpSizeSettings"
                                Padding="10,3.5,10,10"
                                Background="{ThemeResource LayerOnMicaBaseAltFillColorDefaultBrush}"
                                CornerRadius="5"
                                Spacing="5">
                                <TextBlock Style="{ThemeResource SubtitleTextBlockStyle}" Text="Size Options" />
                                <ComboBox
                                    x:Name="CbxSizeSettings"
                                    HorizontalAlignment="Stretch"
                                    Header="Size Settings"
                                    SelectionChanged="OnSizeSettingsComboBoxSelectionChanged">
                                    <ComboBox.Items>
                                        <x:String>Do not resize</x:String>
                                        <x:String>Resize to fill</x:String>
                                        <x:String>Resize to width and keep aspect ratio</x:String>
                                        <x:String>Resize to height and keep aspect ratio</x:String>
                                    </ComboBox.Items>
                                </ComboBox>
                                <ComboBox
                                    x:Name="CbxSizeUnit"
                                    HorizontalAlignment="Stretch"
                                    Header="Size Unit"
                                    SelectionChanged="OnSizeUnitComboBoxSelectionChanged">
                                    <ComboBox.Items>
                                        <x:String>Pixel</x:String>
                                        <x:String>Percent</x:String>
                                    </ComboBox.Items>
                                </ComboBox>
                                <Grid x:Name="GdSize" ColumnSpacing="5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <NumberBox
                                        x:Name="NbxWidth"
                                        Grid.Column="0"
                                        HorizontalAlignment="Stretch"
                                        Header="Width"
                                        Minimum="0" />
                                    <NumberBox
                                        x:Name="NbxHeight"
                                        Grid.Column="1"
                                        HorizontalAlignment="Stretch"
                                        Header="Height"
                                        Minimum="0" />
                                </Grid>
                            </StackPanel>
                            <StackPanel
                                Padding="10,3.5,10,10"
                                Background="{ThemeResource LayerOnMicaBaseAltFillColorDefaultBrush}"
                                CornerRadius="5"
                                Spacing="5">
                                <TextBlock Style="{ThemeResource SubtitleTextBlockStyle}" Text="Save Options" />
                                <TextBox
                                    x:Name="TbxPrefix"
                                    HorizontalAlignment="Stretch"
                                    Header="File Name Prefix"
                                    Text="ATIC_"
                                    TextChanged="OnPrefixTextBoxTextChanged" />
                                <TextBox
                                    x:Name="TbxPrefixPreview"
                                    HorizontalAlignment="Stretch"
                                    Header="File Name Prefix (Preview)"
                                    IsTabStop="False"
                                    PlaceholderText="No selected image" />
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                    <Button
                        x:Name="BtConvert"
                        Grid.Row="1"
                        Margin="0,10,0,0"
                        HorizontalAlignment="Stretch"
                        Click="OnConvertButtonClicked"
                        Content="Convert" />
                </Grid>
                <Frame x:Name="FrPreview" Grid.Column="1">
                    <Grid
                        x:Name="GdPreview"
                        Margin="10"
                        Background="{ThemeResource LayerOnMicaBaseAltFillColorDefaultBrush}"
                        CornerRadius="5">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <ScrollViewer
                            x:Name="SvPreview"
                            Grid.Row="0"
                            Margin="10,10,10,0"
                            CornerRadius="5"
                            HorizontalScrollBarVisibility="Auto"
                            SizeChanged="OnPreviewScrollViewerSizeChanged"
                            VerticalScrollBarVisibility="Auto"
                            ZoomMode="Enabled">
                            <Image
                                x:Name="ImgPreview"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                ImageOpened="OnImagePreviewImageOpened" />
                        </ScrollViewer>
                        <CommandBar
                            Grid.Row="1"
                            Background="Transparent"
                            DefaultLabelPosition="Right">
                            <AppBarButton
                                Click="OnZoomInAppBarButtonClicked"
                                Icon="ZoomIn"
                                Label="Zoom In" />
                            <AppBarButton
                                Click="OnZoomOutAppBarButtonClicked"
                                Icon="ZoomOut"
                                Label="Zoom Out" />
                            <AppBarButton
                                Click="OnResetZoomAppBarButtonClicked"
                                Icon="Zoom"
                                Label="Reset Zoom" />
                        </CommandBar>
                    </Grid>
                </Frame>
                <Grid
                    x:Name="GdProgress"
                    Grid.Row="1"
                    Grid.Column="1"
                    Margin="10,0,10,10"
                    Background="{ThemeResource LayerOnMicaBaseAltFillColorDefaultBrush}"
                    CornerRadius="5"
                    Visibility="Collapsed">
                    <ListView x:Name="LvProgressLog" Height="150">
                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <ItemsStackPanel ItemsUpdatingScrollMode="KeepLastItemInView" />
                            </ItemsPanelTemplate>

                        </ListView.ItemsPanel>
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <TextBlock Text="{Binding}" TextWrapping="Wrap" />
                                </Grid>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </Grid>
            </Grid>
        </Grid>
    </Frame>
</Window>
